# i3 config file
# github.com/thetarkus/dotfiles


#
# settings
#

set $mod Mod4
floating_modifier $mod
font pango:monospace 8
default_orientation horizontal


#
# autostart
#

exec --no-startup-id picom
exec --no-startup-id redshift
exec --no-startup-id imwheel
exec --no-startup-id telegram-desktop
exec --no-startup-id discord
exec --no-startup-id $TERMINAL --title=Calculator -e calc.py


#
# application shortcuts
#

bindsym $mod+d exec rofi -show drun -show-icons
bindsym $mod+w exec rofi -show window -show-icons
bindsym $mod+f exec rofi-files
bindsym $mod+g exec i3-layout-manager

bindsym Pause        exec playerctl play-pause
bindsym $mod+Return  exec $TERMINAL --title Terminal
bindsym Ctrl+Shift+4 exec flameshot gui


#
# window management
#

# kill focused window
bindsym $mod+Shift+q [con_id="__focused__" title="^(?!Calculator).*$"] kill

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# swap focused window (non-destructive)
bindsym $mod+Shift+h mark --add swap; focus left;  swap container with mark swap; unmark swap; focus left
bindsym $mod+Shift+j mark --add swap; focus down;  swap container with mark swap; unmark swap; focus down
bindsym $mod+Shift+k mark --add swap; focus up;    swap container with mark swap; unmark swap; focus up
bindsym $mod+Shift+l mark --add swap; focus right; swap container with mark swap; unmark swap; focus right

# move focused window (destructive)
bindsym $mod+Ctrl+h move left
bindsym $mod+Ctrl+j move down
bindsym $mod+Ctrl+k move up
bindsym $mod+Ctrl+l move right

# move focused container to split
bindsym $mod+y move container to mark _move
bindsym $mod+Shift+y swap container with mark _move

# resize focused window
bindsym $mod+Ctrl+Shift+h resize shrink width  10 px or 10 ppt
bindsym $mod+Ctrl+Shift+j resize grow   height 10 px or 10 ppt
bindsym $mod+Ctrl+Shift+k resize shrink height 10 px or 10 ppt
bindsym $mod+Ctrl+Shift+l resize grow   width  10 px or 10 ppt

# split orientation
bindsym $mod+v split h; mark _move
bindsym $mod+s split v; mark _move

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+r layout toggle split
bindsym $mod+e layout toggle tabbed stacking

# enter fullscreen mode for the focused container
bindsym $mod+m fullscreen toggle

# change window toggles
bindsym $mod+Shift+f floating toggle
bindsym $mod+Shift+x sticky toggle

# change focus between tiling/floating, parent/child, and urgent windows
bindsym $mod+t focus mode_toggle
bindsym $mod+a focus parent
bindsym $mod+Shift+a focus child

# focus urgent
bindsym $mod+u [urgent="latest"] focus, scratchpad show


#
# workspaces
#

set $ws1 1
set $ws2 2
set $ws3 3
set $ws4 4
set $ws5 5
set $ws6 6
set $ws7 7
set $ws8 8
set $ws9 9

workspace_auto_back_and_forth yes

# switch to workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9


#
# window settings
#

# focusing
focus_wrapping no
focus_follows_mouse no
focus_on_window_activation urgent

# borders
for_window [class=".*"] border normal, split toggle

# floating windows
for_window [class="^flameshot$"] floating enable
for_window [instance="engrampa"] floating enable
for_window [instance="^eog$"]    floating enable, border none
for_window [instance="^gthumb$"] floating enable, border none
for_window [instance="^gnome-"]  floating enable, border none
for_window [instance="^org.gnome"] floating enable, border none
for_window [title="^Media viewer$"] floating enable, border none
for_window [instance="VirtualBox Manager$"] floating enable


#
# scratchpad
#

set $calculator [title="^Calculator$"]
for_window      $calculator move scratchpad, resize set 500px 250px, border pixel 5
bindsym $mod+c  $calculator scratchpad show

set $vbman      [title="VirtualBox Manager$"]
for_window      $vbman move scratchpad, scratchpad show
bindsym $mod+b  $vbman scratchpad show

set $telegram   [title="^Telegram" instance="^telegram-desktop$"]
for_window      $telegram move scratchpad
bindsym $mod+F2 $telegram scratchpad show, mark scratchpad

set $discord    [instance="^discord$"]
for_window      $discord move scratchpad
bindsym $mod+F3 $discord scratchpad show, mark scratchpad

set $signal     [instance="^signal$"]
for_window      $signal move scratchpad
bindsym $mod+F4 $signal scratchpad show, mark scratchpad

set $slack      [instance="^slack$"]
for_window      $slack move scratchpad
bindsym $mod+F5 $slack scratchpad show, mark scratchpad

set $spotify    [instance="^spotify$"]
for_window      $spotify move scratchpad
bindsym $mod+F1 $spotify scratchpad show

bindsym $mod+grave [con_mark="scratchpad"] scratchpad show

# minimizing 
bindsym $mod+x \
  [con_mark="minimized" floating] scratchpad show; \
  [con_id="__focused__" floating] mark --toggle minimized; \
  [con_mark="minimized" floating] move scratchpad

#
# desktop environment
#

# session
bindsym $mod+Shift+r restart
bindsym $mod+Shift+w reload
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'Exit?' -B Yes 'i3-msg exit'"
bindsym $mod+Escape  exec close-notification

#
# colors
#

# class                 border  bground text    indicator child_border
client.focused          #15539E #15539E #FFFFFF #2E9EF4   #15539E
client.focused_inactive #333333 #353535 #FFFFFF #484E50   #5F676A
client.unfocused        #333333 #252525 #888888 #292D2E   #222222
client.urgent           #2F343A #900000 #FFFFFF #900000   #900000
client.placeholder      #000000 #0C0C0C #FFFFFF #000000   #0C0C0C
client.background       #FFFFFF


#
# bar
#

# bar
bar {
  status_command i3status

  colors {
    background #000000
    statusline #FFFFFF
    separator  #666666

    focused_workspace  #15539E #15539E #FFFFFF
    active_workspace   #222222 #111111 #FFFFFF
    inactive_workspace #222222 #111111 #888888
    urgent_workspace   #2F343A #900000 #FFFFFF
    binding_mode       #2F343A #900000 #FFFFFF
  }
}
